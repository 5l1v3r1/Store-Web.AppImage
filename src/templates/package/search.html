{% extends '_layout.html' %}
{% load math %}
{% load widgets %}

{% block content %}
<div class="row">
    <div class="col s12">
        <h4 class="title">Welcome to Apprepo</h4>
    </div>
    <div class="col s12">
        {% widget 'dashboard.search' %}
        <p>
            the home of <span class="tag is-light is-info">{{total }}</span>
            high-quality apps which can be easily installed on
            any Linux distribution.
        </p>
    </div>
</div>

<div class="row">
    {% for package in collection %}
    <div class="col s6">
        <div class="card">
            <div class="card-image">
                <a href="{% url 'package' package.id %}">
                    {% if package.image %}
                    <img src="{{ package.image.url }}" alt="{{ package.name }}" width="300">
                    {% else %}
                    <img src="https://bulma.io/images/placeholders/1280x960.png" alt="{{ package.name }}">
                    {% endif %}

                    <span class="card-title">
                        {{ package.name }}
                    </span>
                </a>
            </div>
            <div class="card-content">
                <p>
                    {% autoescape off %}
                    {{ package.description }}
                    {% endautoescape %}

                </p>
            </div>
            <div class="card-action">
                <a href="{% url 'package' package.id %}">
                    show me more...
                </a>
            </div>
        </div>
    </div>

    {% if forloop.counter|modulo:'2' == 0 %}
</div>
<div class="row">
    {% endif %}
    {% endfor %}
</div>
{% endblock %}
